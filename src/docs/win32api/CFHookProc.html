<html>
<body>
<FONT style="FONT: 12px 宋体" color=black>
<h3>函数功能</h3>该挂钩函数是一个应用程序定义的或库定义的回调函数，此回调函数与ChooseFont函数一起使用。挂钩函数接收用于Font公共对话框的缺省对话框函数的消息和通告。<br>
LPCFHOOKPROC类型定义了一个指向这种回调函数的指针。CFHOOKProc是一个由应用程序定义的函数名的位置占有者。<br>
<h3>函数原型</h3>UINT CALLBACK CFHookProc（HWND hdlg，UINT uiMsg，WPARAM wParam，LPARAM IParam）；<br>
<h3>参数</h3>
hdlg：指向消息所指的Font对话框窗口的句柄。<br>
uiMsg：指定存放的消息。<br>
wParam：指定有关消息的其他信息。精确的意义根据uiMsg参数的值来决定。<br>
IParam：指定有关消息的其他信息。精确的意义根据uiMSg参数的值来决定。如果uiMsg参数表明WM_INITDIALOG消息，则IParam是一个指向CHOOSEFONT结构的指针，该结构含有创建公共对话框时指定的值。<br>
<h3>返回值</h3>如果挂钩函数返回零值，缺省对话框函数处理消息。如果挂钩函数返回一个非零值，缺省对话框函数忽略消息。<br>
备注：用ChooseFont函数创建一个Font对话框时，可以为对话框函数提供挂钩函数来处理消息。<br>
为使挂钩函数生效，要用传送到对话创建函数的CHOOSEFONT结构，指定IpfnHook成员中挂钩函数的地址和Flags成员中CF_ENABLEHOOK标志。<br>
缺省的对话框函数处理WM_INTDIALOG消息后，把它传送给挂钩函数。对于其他消息，挂钩函数首先存放此消息。然后挂钩函数的返回值决定缺省对话函数是否处理消息或忽略它。<br>
如果挂钩函数处理 WM_CTLCOLORDLG信息，它必须返回一个有效的刷子句柄，以刷对话的背景。<br>
总之，如果挂钩函数处理任何一个WM_CTLCOLOR消息，那么必须返回一个有效刷子句柄，以绘制指定控制的背景不须从挂钩函数调用EndDialog函数。相反，挂钩函数能调用PostMessage函数，把带有IDABORT值的一个WM_CDOMMAND信息传送给对话框函数Posting IDABORT关闭对话框，使对话框函数退回FALSE值，若要了解为什么挂钩函数关闭对话框，必须提供挂钩函数和应用程序之间的联系机理。<br>
可以对公共对话框的标准控制面板进行子分类。但是公共对话框函数也可以对控制面板进行子分类。正因如此，必须在挂钩函数WM_INTDIALDG处理消息时对控制面板子分类。这就保证对话框函数设置子分类函数之前，子分类函数接收指定的控制消息。<br>
<h3>速查</h3>Windows NT：3.1及以上版本；Windows：95及以上版本；Windows CE：不支持；头文件：commdlg.h；库文件：用户自定义。<br>

</body>
</html>
